<?php require_once('../Connections/local.php'); ?><?php//initialize the sessionif (!isset($_SESSION)) {  session_start();  $showDate = date("Y.m.d");  $_SESSION['current_date'] = $showDate;} else{	 unset($_SESSION['current_date']);}// ** Logout the current user. **$logoutAction = $_SERVER['PHP_SELF']."?doLogout=true";if ((isset($_SERVER['QUERY_STRING'])) && ($_SERVER['QUERY_STRING'] != "")){  $logoutAction .="&". htmlentities($_SERVER['QUERY_STRING']);}if ((isset($_GET['doLogout'])) &&($_GET['doLogout']=="true")){  //to fully log out a visitor we need to clear the session varialbles  $_SESSION['MM_Username'] = NULL;  $_SESSION['MM_UserGroup'] = NULL;  $_SESSION['PrevUrl'] = NULL;  unset($_SESSION['MM_Username']);  unset($_SESSION['MM_UserGroup']);  unset($_SESSION['PrevUrl']);	  $logoutGoTo = "../logout.php";  if ($logoutGoTo) {    header("Location: $logoutGoTo");    exit;  }}?><?phpif (!function_exists("GetSQLValueString")) {function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") {  if (PHP_VERSION < 6) {    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;  }  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);  switch ($theType) {    case "text":      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";      break;        case "long":    case "int":      $theValue = ($theValue != "") ? intval($theValue) : "NULL";      break;    case "double":      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";      break;    case "date":      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";      break;    case "defined":      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;      break;  }  return $theValue;}}mysql_select_db($database_local, $local);$query_kehadiran = "SELECT * FROM kehadiran ORDER BY tarikh DESC";$kehadiran = mysql_query($query_kehadiran, $local) or die(mysql_error());$row_kehadiran = mysql_fetch_assoc($kehadiran);$totalRows_kehadiran = mysql_num_rows($kehadiran);$colname_jumlah_kehadiran = "-1";if (isset($_GET['filter_date'])) {  $colname_jumlah_kehadiran = $_GET['filter_date'];}mysql_select_db($database_local, $local);$query_jumlah_kehadiran = sprintf("SELECT * FROM kehadiran WHERE tarikh = %s", GetSQLValueString($colname_jumlah_kehadiran, "date"));$jumlah_kehadiran = mysql_query($query_jumlah_kehadiran, $local) or die(mysql_error());$row_jumlah_kehadiran = mysql_fetch_assoc($jumlah_kehadiran);$totalRows_jumlah_kehadiran = mysql_num_rows($jumlah_kehadiran);?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><script type = "text/javascript" src="../script.js"></script><link rel="stylesheet" href="../css/sidebar.css"><link rel="stylesheet" href="../css/table.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><title>Sistem Kehadiran Pelajar KSK</title><style>	body {	  margin: 0;	  background:#555;	  font-family: sans-serif;	  font-weight: 100;	}		a {	  text-decoration: none;	  color: #000;	}	.site-header { 		background: linear-gradient(45deg, #49a09d, #5f2c82);	  border-bottom: 1px solid #ccc;	  padding: .5em 1em;	}		.site-header::after {	  content: "";	  display: table;	  clear: both;	}		.site-identity {	  float: left;	}		.site-identity h1 {	  font-size: 1.5em;	  margin: .7em 0 .3em 0;	  display: inline-block;	}		.site-identity h1 a{	  color:#FFF;	}		.site-navigation {	  float: right;	}		.site-navigation ul, li a{	  margin: 0; 	  padding: 0;	  color:#FFF;	}		.site-navigation li {	  display: inline-block;	  margin: 1.4em 1em 1em 1em;	}		.navigation {		  list-style: none;		  margin: 0;		  padding: 0;		  background-color: #f8f8f8;		  text-align:center		}		.navigation li {		  display: inline-block;		 margin-right: 10px; /* add margin between li elements */		}				.navigation li:last-child {		  margin-right: 0; /* remove margin from last li element */		}		.navigation li a {		  display: block;		  padding: 10px 20px;		  text-decoration: none;		  color: #333;		}		.navigation li a:hover {		  background-color: #333;		  color: #fff;		}		.filter-sort{			margin-left:auto;			padding: 30px;		}		.user-list {		  display: inline-block;		  padding: 12px 24px;		  font-weight: bold;		  text-align: center;		  text-transform: uppercase;		  color: #fff;		  background-color: #55608f;		  border: none;		  border-radius: 4px;		  cursor: pointer;		  transition: all 0.3s ease;		}		.user-list:hover {		  background-color: #0062cc;		}		.filter-container{			color: beige;			text-align: center;		}		.calendar-wrapper {	    position: relative;	  }	  .calendar-overlay {	    display: none;	    position: fixed;	    top: 0;	    left: 0;	    width: 100%;	    height: 100%;	    background-color: rgba(0, 0, 0, 0.5);	    z-index: 2;	  }		.calendar {			margin-left:auto;			margin-right:auto;		  border: 1px solid #ccc;		  width: 250px;		  font-family: Arial, sans-serif;		  color:#330066;		  background-color: #f8f8f8;		  position: absolute;	    top: 50%;	    left: 50%;	    transform: translate(-50%, -50%);	    background-color: #fff;	    border: 1px solid #ccc;	    z-index: 3;		}				.calendar-toggle {	    cursor: pointer;	  }		.header {		  display: flex;		  justify-content: space-between;		  align-items: center;		  padding: 5px;		}				.days {		  display: grid;		  grid-template-columns: repeat(7, 1fr);		  gap: 5px;		  padding: 5px;		}				.day {		  display: flex;		  justify-content: center;		  align-items: center;		  height: 30px;		  border: 1px solid #ccc;		  cursor: pointer;		}				.day:hover {		  background-color: #f2f2f2;		}	</style></head><body >	<header class="site-header">        <div id="mySidenav" class="sidenav">          <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>          <a href="javascript:void(0)" onclick="closeNav()"><i class="fa fa-search" aria-hidden="true"></i>Semak Kehadiran</a>          <a href="daftarpelajar.php"><i class="fa fa-user-plus" aria-hidden="true"></i>Daftar Masuk Pelajar</a>          <a href="senaraipelajar.php"><i class="fa fa-users" aria-hidden="true"></i>Senarai Pelajar</a>          <a href="<?php echo $logoutAction ?>" style="color:#FFF"><i class="fa fa-sign-out"></i>Log Keluar</a>        </div>      <div class="site-identity">      	<span style="font-size:30px;cursor:pointer; color:#FFFFFF" onclick="openNav()">&#9776;</span>                <h1><a href="#">Sistem Kehadiran Pelajar KSK</a></h1>        <h1><a style=" padding-left:150px;text-align:center; font-size: 17px">Semak Kehadiran</a></h1>      </div>        <nav class="site-navigation">        <ul class="nav">          <li><a href="<?php echo $logoutAction ?>"><i class="fa fa-sign-out"></i>Log Keluar</a></li>        </ul>      </nav>    </header>    <div >	<div class="filter-container">		<br />	    <div class="calendar-wrapper">		  <button class="calendar-toggle" onclick="toggleCalendar()">Show Calendar</button>		  <div class="calendar-overlay" id="calendar-overlay">		    <div class="calendar" id="calendar">		    	<h1>Sila Pilih Tarikh</h1>		      <div class="header">		        <button class="prev" onclick="prevMonth()">&#10094;</button>		        <h2 id="month-year"></h2>		        <button class="next" onclick="nextMonth()">&#10095;</button>		      </div>		      <div class="days"></div>		    </div>		  </div>		  <form method="get" id="date-form">		    <input type="hidden" name="filter_date" id="selected-date">		    <input type="submit" value="Filter">		  </form>		</div>	</div>	<p></p>	  <?php if ($totalRows_jumlah_kehadiran > 0) { // Show if recordset not empty ?>	  <div class="container">	    <table width="70%" border="0" cellspacing="0" class="styled-table">	      <thead>	        <tr>	          <th>Nama Pelajar</th>	          <th>Tahun</th>	          <th>Tarikh</th>	          <th>Masa</th>	          </tr>	        </thead>	      <tbody>	        <?php do { ?>	          <tr>	            <td><?php echo $row_jumlah_kehadiran['nama']; ?></td>	            <td><?php echo $row_jumlah_kehadiran['tahun']; ?></td>	            <td><?php echo $row_jumlah_kehadiran['tarikh']; ?></td>	            <td><?php echo $row_jumlah_kehadiran['masa']; ?></td>	          </tr>	          <?php } while ($row_jumlah_kehadiran = mysql_fetch_assoc($jumlah_kehadiran)); ?>	          <tr>	          <th colspan="2">Jumlah Kehadiran : <?php echo $totalRows_jumlah_kehadiran ?> </th>	          <th colspan="2"><button onclick="myFunction()">Print this page</button></th>	          </tr>	      </tbody>	      </table>	  </div>	  <?php } else { ?>	  	<p style="text-align:center; color:#FFFFFF; padding-top: 10%; padding-bottom: 10%;">Tiada Rekod Kehadiran</p>	  <?php }?></div><script>	function myFunction() {		window.print();		}	function toggleCalendar() {    const overlay = document.getElementById("calendar-overlay");    overlay.style.display = (overlay.style.display === "block") ? "none" : "block";  }	var now = new Date();	var currentMonth = now.getMonth();	var currentYear = now.getFullYear();		function generateCalendar() {	  var monthYear = document.getElementById("month-year");	  monthYear.innerHTML = getMonthName(currentMonth) + " " + currentYear;	  	  var daysContainer = document.querySelector(".days");	  daysContainer.innerHTML = "";	  	  var firstDay = new Date(currentYear, currentMonth, 1).getDay();	  var lastDay = new Date(currentYear, currentMonth + 1, 0).getDate();	  	  for (var i = 0; i < firstDay; i++) {		var emptyDay = document.createElement("div");		emptyDay.classList.add("day");		daysContainer.appendChild(emptyDay);	  }	  	  for (var i = 1; i <= lastDay; i++) {		var day = document.createElement("div");		day.classList.add("day");		day.innerHTML = i;		day.addEventListener("click", selectDate);		daysContainer.appendChild(day);	  }	}		function selectDate(event) {	  var selectedDay = event.target.innerHTML;	  var selectedMonth = currentMonth + 1;	  if (selectedMonth < 10) {		selectedMonth = "0" + selectedMonth;	  }	  var selectedYear = currentYear;	  var selectedDate = selectedYear + "-" + selectedMonth + "-" + selectedDay;	  	  document.getElementById("selected-date").value = selectedDate;	  document.getElementById("date-form").submit();	}		function getMonthName(monthIndex) {	  var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];	  return monthNames[monthIndex];	}		function prevMonth() {	  currentMonth--;	  if (currentMonth < 0) {		currentMonth = 11;		currentYear--;	  }	  generateCalendar();	}		function nextMonth() {	  currentMonth++;	  if (currentMonth > 11) {		currentMonth = 0;		currentYear++;	  }	  generateCalendar();	}generateCalendar();</script></body></html><?phpmysql_free_result($kehadiran);mysql_free_result($jumlah_kehadiran);?>