<?php require_once('../Connections/localhost.php'); ?><?php require_once('../Connections/localhost.php'); ?><?php//initialize the sessionif (!isset($_SESSION)) {  session_start();}// ** Logout the current user. **$logoutAction = $_SERVER['PHP_SELF']."?doLogout=true";if ((isset($_SERVER['QUERY_STRING'])) && ($_SERVER['QUERY_STRING'] != "")){  $logoutAction .="&". htmlentities($_SERVER['QUERY_STRING']);}if ((isset($_GET['doLogout'])) &&($_GET['doLogout']=="true")){  //to fully log out a visitor we need to clear the session varialbles  $_SESSION['MM_Username'] = NULL;  $_SESSION['MM_UserGroup'] = NULL;  $_SESSION['PrevUrl'] = NULL;  unset($_SESSION['MM_Username']);  unset($_SESSION['MM_UserGroup']);  unset($_SESSION['PrevUrl']);	  $logoutGoTo = "../logout.php";  if ($logoutGoTo) {    header("Location: $logoutGoTo");    exit;  }}?><?php require_once('../Connections/localhost.php'); ?><?phpif (!function_exists("GetSQLValueString")) {function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") {  if (PHP_VERSION < 6) {    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;  }  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);  switch ($theType) {    case "text":      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";      break;        case "long":    case "int":      $theValue = ($theValue != "") ? intval($theValue) : "NULL";      break;    case "double":      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";      break;    case "date":      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";      break;    case "defined":      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;      break;  }  return $theValue;}}$editFormAction = $_SERVER['PHP_SELF'];if (isset($_SERVER['QUERY_STRING'])) {  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);}if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form")) {  $insertSQL = sprintf("INSERT INTO student (student_name, grade_level, `date`, `time`) VALUES (%s, %s, %s, %s)",                       GetSQLValueString($_POST['nama_pelajar'], "text"),                       GetSQLValueString($_POST['current_year'], "int"),                       GetSQLValueString($_POST['attendance_date'], "date"),                       GetSQLValueString($_POST['attendance_time'], "date"));  mysql_select_db($database_localhost, $localhost);  $Result1 = mysql_query($insertSQL, $localhost) or die(mysql_error());  $insertGoTo = "../logkeluar.php";  if (isset($_SERVER['QUERY_STRING'])) {    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";    $insertGoTo .= $_SERVER['QUERY_STRING'];  }  echo '<script>alert("KEHADIRAN TELAH BERJAYA DIISI")</script>';}mysql_select_db($database_localhost, $localhost);$query_Pelajar = "SELECT * FROM nama_pelajar";$Pelajar = mysql_query($query_Pelajar, $localhost) or die(mysql_error());$row_Pelajar = mysql_fetch_assoc($Pelajar);$totalRows_Pelajar = mysql_num_rows($Pelajar);$colname_nama_pelajar_matric_id = "-1";if (isset($_SESSION['matric_no'])) {  $colname_nama_pelajar_matric_id = $_SESSION['matric_no'];}mysql_select_db($database_localhost, $localhost);$query_nama_pelajar_matric_id = sprintf("SELECT nama FROM nama_pelajar WHERE no_matrik = %s", GetSQLValueString($colname_nama_pelajar_matric_id, "text"));$nama_pelajar_matric_id = mysql_query($query_nama_pelajar_matric_id, $localhost) or die(mysql_error());$row_nama_pelajar_matric_id = mysql_fetch_assoc($nama_pelajar_matric_id);$totalRows_nama_pelajar_matric_id = mysql_num_rows($nama_pelajar_matric_id);$colname_tahun_matric_id = "-1";if (isset($_SESSION['matric_no'])) {  $colname_tahun_matric_id = $_SESSION['matric_no'];}mysql_select_db($database_localhost, $localhost);$query_tahun_matric_id = sprintf("SELECT gred FROM nama_pelajar WHERE no_matrik = %s", GetSQLValueString($colname_tahun_matric_id, "text"));$tahun_matric_id = mysql_query($query_tahun_matric_id, $localhost) or die(mysql_error());$row_tahun_matric_id = mysql_fetch_assoc($tahun_matric_id);$totalRows_tahun_matric_id = mysql_num_rows($tahun_matric_id);?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Sistem Kehadiran Pelajar KSK</title><style>	body {	  margin: 0;	  background:#555;	  font-family: sans-serif;	  font-weight: 100;	}		a {	  text-decoration: none;	  color: #000;	}	.site-header { 		background: linear-gradient(45deg, #49a09d, #5f2c82);	  border-bottom: 1px solid #ccc;	  padding: .5em 1em;	}		.site-header::after {	  content: "";	  display: table;	  clear: both;	}		.site-identity {	  float: left;	}		.site-identity h1 {	  font-size: 1.5em;	  margin: .7em 0 .3em 0;	  display: inline-block;	}		.site-identity img {	  max-width: 299px;	  float: left;	  margin: 0 10px 0 0;	}	.site-navigation {	  float: right;	  padding-right: 30px;	}		.site-navigation ul, li {	  margin: 0; 	  padding: 0;	  color:#FFF;	}		.site-navigation li {	  display: inline-block;	  margin: 1.4em 1em 1em 1em;	}		.site-navigation h1, li  a{	  color:#FFF;	}	.site-navigation h1, h1  a{	  color:#FFF;	}		.navigation {			  list-style: none;		  margin: 0;		  padding: 0;		  background-color: #f8f8f8;		  text-align:center		}		.navigation li {		  display: inline-block;		 margin-right: 10px; /* add margin between li elements */		}				.navigation li:last-child {		  margin-right: 0; /* remove margin from last li element */		}		.navigation li a {		  display: block;		  padding: 10px 20px;		  text-decoration: none;		  color: #333;		}		.navigation li a:hover {		  background-color: #333;		  color: #fff;		}				label {			display: list-item;			margin-bottom: 10px;		}		input[type="datetime-local"] {			width: 250px;			padding: 5px;			font-size: 16px;			border: 1px solid #ccc;			border-radius: 4px;		}		input[type="submit"] {			background-color: #4CAF50;			color: white;			padding: 10px 20px;			border: none;			border-radius: 4px;			cursor: pointer;			margin-top: 10px;		}	</style></head><body>	<header class="site-header">      <div class="site-identity">        <a href="#"><img src="../logo.png" width="288" height="93" alt="" /></a>        <h1><a href="#">Sistem Kehadiran Pelajar KSK</a></h1>      </div>        <nav class="site-navigation">        <ul class="nav">          <li><a href="<?php echo $logoutAction ?>">Log Keluar</a></li>         </ul>      </nav>    </header>    <div style="text-align:center; margin-top: 100px; color:#FFFFFF">    	<form action="<?php echo $editFormAction; ?>" name="form" method="POST">        <label for="nama_pelajar">Enter Student Name:</label>        <input style="width: 20%; text-align:center;" name="nama_pelajar" type="text" value="<?php echo $row_nama_pelajar_matric_id['nama']; ?>" readonly />        <label for="attendance_date">Enter Current Year:</label>        <input style="width: 20%; text-align:center;" name="current_year" type="text" value="<?php echo $row_tahun_matric_id['gred']; ?>" readonly />		<label for="attendance_date">Enter attendance date:</label>		<input type="date" id="attendance_date" name="attendance_date" required readonly>		<label for="attendance_time">Enter attendance time:</label>		<input type="time" id="attendance_time" name="attendance_time" required readonly>		<input type="submit" value="Submit" style="background: linear-gradient(45deg, #49a09d, #5f2c82);">		<input type="hidden" name="MM_insert" value="form" />  </form>    </div>    <p><script>		// Get the current date and time		var currentDate = new Date();				// Format the date and time strings		var dateString = currentDate.toISOString().slice(0,10);		var timeString = currentDate.toTimeString().slice(0,5);				// Set the input field values to the current date and time		document.getElementById("attendance_date").value = dateString;		document.getElementById("attendance_time").value = timeString;	</script></body></html><?phpmysql_free_result($Pelajar);mysql_free_result($tahun_matric_id);mysql_free_result($Pelajar);mysql_free_result($nama_pelajar_matric_id);mysql_free_result($tahun_matric_id);mysql_free_result($student);mysql_free_result($attendance_list);mysql_free_result($senarai_pelajar);mysql_free_result($student_set);mysql_free_result($Recordset1);?>