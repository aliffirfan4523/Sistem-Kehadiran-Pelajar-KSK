<?php require_once('../Connections/local.php'); ?><?php//initialize the sessionif (!isset($_SESSION)) {  session_start();  $showDate = date("Y.m.d");  $_SESSION['current_date'] = $showDate;} else{	 unset($_SESSION['current_date']);}// ** Logout the current user. **$logoutAction = $_SERVER['PHP_SELF']."?doLogout=true";if ((isset($_SERVER['QUERY_STRING'])) && ($_SERVER['QUERY_STRING'] != "")){  $logoutAction .="&". htmlentities($_SERVER['QUERY_STRING']);}if ((isset($_GET['doLogout'])) &&($_GET['doLogout']=="true")){  //to fully log out a visitor we need to clear the session varialbles  $_SESSION['MM_Username'] = NULL;  $_SESSION['MM_UserGroup'] = NULL;  $_SESSION['PrevUrl'] = NULL;  unset($_SESSION['MM_Username']);  unset($_SESSION['MM_UserGroup']);  unset($_SESSION['PrevUrl']);	  $logoutGoTo = "../logout.php";  if ($logoutGoTo) {    header("Location: $logoutGoTo");    exit;  }}?><?phpif (!function_exists("GetSQLValueString")) {function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") {  if (PHP_VERSION < 6) {    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;  }  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);  switch ($theType) {    case "text":      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";      break;        case "long":    case "int":      $theValue = ($theValue != "") ? intval($theValue) : "NULL";      break;    case "double":      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";      break;    case "date":      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";      break;    case "defined":      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;      break;  }  return $theValue;}}mysql_select_db($database_local, $local);$query_kehadiran = "SELECT * FROM kehadiran ORDER BY tarikh DESC";$kehadiran = mysql_query($query_kehadiran, $local) or die(mysql_error());$row_kehadiran = mysql_fetch_assoc($kehadiran);$totalRows_kehadiran = mysql_num_rows($kehadiran);$colname_jumlah_kehadiran = "-1";if (isset($_GET['filter_date'])) {  $colname_jumlah_kehadiran = $_GET['filter_date'];}mysql_select_db($database_local, $local);$query_jumlah_kehadiran = sprintf("SELECT * FROM kehadiran WHERE tarikh = %s", GetSQLValueString($colname_jumlah_kehadiran, "date"));$jumlah_kehadiran = mysql_query($query_jumlah_kehadiran, $local) or die(mysql_error());$row_jumlah_kehadiran = mysql_fetch_assoc($jumlah_kehadiran);$totalRows_jumlah_kehadiran = mysql_num_rows($jumlah_kehadiran);?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><script type = "text/javascript" src="../script.js"></script><link rel="stylesheet" href="../css/sidebar.css"><title>Sistem Kehadiran Pelajar KSK</title><style>	body {	  margin: 0;	  background:#555;	  font-family: sans-serif;	  font-weight: 100;	}		a {	  text-decoration: none;	  color: #000;	}	.site-header { 		background: linear-gradient(45deg, #49a09d, #5f2c82);	  border-bottom: 1px solid #ccc;	  padding: .5em 1em;	}		.site-header::after {	  content: "";	  display: table;	  clear: both;	}		.site-identity {	  float: left;	}		.site-identity h1 {	  font-size: 1.5em;	  margin: .7em 0 .3em 0;	  display: inline-block;	}		.site-identity h1 a{	  color:#FFF;	}		.site-navigation {	  float: right;	}		.site-navigation ul, li a{	  margin: 0; 	  padding: 0;	  color:#FFF;	}		.site-navigation li {	  display: inline-block;	  margin: 1.4em 1em 1em 1em;	}		table {		margin-left: auto;		margin-right: auto;		  border-collapse: collapse;	  overflow: hidden;	  box-shadow: 0 0 20px rgba(0,0,0,0.1);	}		th,td {	  padding: 15px;	  background:#55608f;	  color: #fff;	}		th {	  text-align: left;	}		thead {	  th {		background-color: #55608f;	  }	}		tbody {	  tr {		&:hover {		  background-color: rgba(255,255,255,0.3);		}	  }	  td {		position: relative;		&:hover {		  &:before {			content: "";			position: absolute;			left: 0;			right: 0;			top: -9999px;			bottom: -9999px;			background-color: rgba(255,255,255,0.2);			z-index: -1;		  }		}	  }	}	.table-pelajar {		border: 1px solid black;		border-collapse: collapse;	}			.table-pelajar th, td {		padding: 10px;	}		.navigation {		  list-style: none;		  margin: 0;		  padding: 0;		  background-color: #f8f8f8;		  text-align:center		}		.navigation li {		  display: inline-block;		 margin-right: 10px; /* add margin between li elements */		}				.navigation li:last-child {		  margin-right: 0; /* remove margin from last li element */		}		.navigation li a {		  display: block;		  padding: 10px 20px;		  text-decoration: none;		  color: #333;		}		.navigation li a:hover {		  background-color: #333;		  color: #fff;		}		.filter-sort{			margin-left:auto;			padding: 30px;		}		.user-list {		  display: inline-block;		  padding: 12px 24px;		  font-weight: bold;		  text-align: center;		  text-transform: uppercase;		  color: #fff;		  background-color: #55608f;		  border: none;		  border-radius: 4px;		  cursor: pointer;		  transition: all 0.3s ease;		}		.user-list:hover {		  background-color: #0062cc;		}		.filter-container{			color: beige;			text-align: center;		}	</style></head><body >	<header class="site-header">        <div id="mySidenav" class="sidenav">          <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>          <a href="javascript:void(0)" onclick="closeNav()">Semak Kehadiran</a>          <a href="daftarpelajar.php">Daftar Masuk Pelajar</a>          <a href="senaraipelajar.php">Senarai Pelajar</a>          <a href="<?php echo $logoutAction ?>">Log Keluar</a>        </div>      <div class="site-identity">      	<span style="font-size:30px;cursor:pointer; color:#FFFFFF" onclick="openNav()">&#9776;</span>                <h1><a href="#">Sistem Kehadiran Pelajar KSK</a></h1>      </div>        <nav class="site-navigation">        <ul class="nav">          <li><a href="<?php echo $logoutAction ?>">Log Keluar</a></li>        </ul>      </nav>    </header>    <div><div class="filter-container"><br />	<form method="get">		<label for="filter_date">Enter Date:</label>		<input name="filter_date" type="date" id="filter_date" value="<?php $currentdate = $_SESSION['current_date'] ?>">		<input type="submit" value="Filter" onclick="<?php $_SESSION['current_date'] = $currentdate; ?> "></div><p></p>  <?php if ($totalRows_jumlah_kehadiran > 0) { // Show if recordset not empty ?>  <div class="container">    <table width="50%" border="0" cellspacing="0" class="styled-table">      <thead>        <tr>          <th>Nama Pelajar</th>          <th>Tahun</th>          <th>Tarikh</th>          <th>Masa</th>          </tr>        </thead>      <tbody>        <?php do { ?>          <tr>            <td><?php echo $row_jumlah_kehadiran['nama']; ?></td>            <td><?php echo $row_jumlah_kehadiran['tahun']; ?></td>            <td><?php echo $row_jumlah_kehadiran['tarikh']; ?></td>            <td><?php echo $row_jumlah_kehadiran['masa']; ?></td>          </tr>          <?php } while ($row_jumlah_kehadiran = mysql_fetch_assoc($jumlah_kehadiran)); ?>          <tr>          <th colspan="4">Jumlah Kehadiran : <?php echo $totalRows_jumlah_kehadiran ?> </th>          </tr>      </tbody>      </table>  </div>  <?php } else { ?>  	<p style="text-align:center">Tiada Rekod Kehadiran</p>  <?php }?></div><script></script></body></html><?phpmysql_free_result($kehadiran);mysql_free_result($jumlah_kehadiran);?>